---
title: Mesos和YARN辨析
date: 2016-10-17 19:15:00
tags: 开发
---

早就听说了Mesos和YARN的名头，除了知道它们都适合作为分布式计算引擎之外，并不了解二者之间的区别。但因为之前没有合适的场景，所以也就止步于这种粗浅的认识。随着系统的扩展，分布式计算引擎的需求开始浮出水面，趁着这次机会开始收集和了解它们俩的一些资料。凑巧，[这篇文章](https://www.oreilly.com/ideas/a-tale-of-two-clusters-mesos-and-yarn)以浅显的语言指出二者的区别。

首先，从功能性上来讲：
- YARN是Hadoop Only
- Mesos适用场景则要广泛得多

其次，从调度机制上来说：
- YARN采用的是一级调度，即一种monolithic方式，只要资源满足要求，就运行任务。
- Mesos采用的是二级调度，由Mesos和应用调度器共同决定任务是否可运行（见下）。这种实现方式让Mesos的调度算法是pluggable的，调度方式更加灵活。
  1. Mesos判断资源是否可用，若可用，则决定权交给应用调度器。
  1. 应用调度器根据自身逻辑判断是否让任务运行。

最后，从适合运行的任务来讲：
- YARN，显然是Hadoop任务，即传统的批处理任务（运行时间适中，多次，无状态）。但不适合：长时间存活的的服务（单次运行时间长）、短时间存活的交互服务，以及对实时性要求高的任务。
- Mesos，由于其调度算法的灵活性，可用适用于广泛类型的任务。

根据以上的描述，当你已经有Hadoop集群时，显然可无脑做出判断：YARN。但Mesos和YARN之间并非势不两立，相反，从Mesos的实现上来看，理论上Mesos可用以将YARN作为一个应用调度器。在这种情况下，简直就是一个完美的世界。

文中提到的[Myriad](http://myriad.incubator.apache.org)框架恰恰就是致力于此。
